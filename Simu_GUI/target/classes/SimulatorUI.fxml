<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.String?>
<?import javafx.collections.FXCollections?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.LineChart?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.ChoiceBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ProgressBar?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Slider?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.TitledPane?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.Arc?>
<?import javafx.scene.text.Font?>

<BorderPane prefHeight="760" prefWidth="1200" styleClass="root-pane" stylesheets="@UI/styles.css" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1">

    <!-- TOP HEADER -->
    <top>
        <HBox alignment="CENTER_LEFT" spacing="12" styleClass="top-bar">
            <padding>
                <Insets bottom="12" left="20" right="20" top="12" />
            </padding>

            <Label styleClass="app-title" text="Cafeteria Simulator" />

            <Pane HBox.hgrow="ALWAYS">
            <children>
                   <Button fx:id="resumeBtn" layoutX="900.0" styleClass="secondary-button" text="Resume" />
                   <Button fx:id="pauseBtn" layoutX="836.0" styleClass="secondary-button" text="Pause" />
            </children></Pane>
        </HBox>
    </top>

    <!-- LEFT SIDEBAR -->
    <left>
        <ScrollPane fitToWidth="true" prefWidth="320" styleClass="sidebar-scroll">
            <content>
                <VBox spacing="14" styleClass="sidebar">
                    <padding>
                        <Insets bottom="16" left="16" right="16" top="16" />
                    </padding>

                       <!-- Section Header -->
                    <Label styleClass="section-title" text="Simulation Settings" />

                       <!-- Opening Hours -->
                    <TitledPane expanded="true" styleClass="panel-card" text="Opening Hours">
                        <content>
                            <VBox spacing="8">
                                <padding>
                                    <Insets bottom="10" left="10" right="10" top="10" />
                                </padding>

                                   <HBox alignment="CENTER_LEFT" spacing="8">
                                    <Label text="Hours:" />
                                    <TextField fx:id="openingHoursField" prefWidth="100" promptText="3" />
                                </HBox>

                                   <Label text="Arrival Rate (students / hr)" />

                                   <HBox alignment="CENTER_LEFT" spacing="8">
                                    <Slider fx:id="arrivalSlider" max="500" min="0" prefWidth="200" value="120" />
                                    <Label fx:id="arrivalValue" text="120" />
                                </HBox>
                            </VBox>
                        </content>
                    </TitledPane>

                       <!-- Meal Station Timings -->
                    <TitledPane styleClass="panel-card" text="Meal Station Timings">
                        <content>
                            <VBox spacing="8">
                                <padding>
                                    <Insets bottom="10" left="10" right="10" top="10" />
                                </padding>

                                   <HBox spacing="8">
                                    <Label prefWidth="100" text="Grill (s):" />
                                    <TextField fx:id="grillTime" prefWidth="80" promptText="45" />
                                </HBox>

                                   <HBox spacing="8">
                                    <Label prefWidth="100" text="Vegan (s):" />
                                    <TextField fx:id="veganTime" prefWidth="80" promptText="40" />
                                </HBox>

                                   <HBox spacing="8">
                                    <Label prefWidth="100" text="Normal (s):" />
                                    <TextField fx:id="normalTime" prefWidth="80" promptText="30" />
                                </HBox>
                            </VBox>
                        </content>
                    </TitledPane>

                       <!-- Payment -->
                    <TitledPane styleClass="panel-card" text="Payment">
                        <content>
                            <VBox spacing="8">
                                <padding>
                                    <Insets bottom="10" left="10" right="10" top="10" />
                                </padding>

                                   <HBox spacing="8">
                                    <Label prefWidth="120" text="Cashier (s):" />
                                    <TextField fx:id="cashierTime" prefWidth="80" promptText="20" />
                                </HBox>

                                   <HBox spacing="8">
                                    <Label prefWidth="120" text="Self-service (s):" />
                                    <TextField fx:id="selfServiceTime" prefWidth="80" promptText="12" />
                                </HBox>

                                   <CheckBox fx:id="enableSelfService" selected="true" text="Enable Self-service" />
                            </VBox>
                        </content>
                    </TitledPane>

                       <!-- Coffee -->
                    <TitledPane styleClass="panel-card" text="Coffee">
                        <content>
                            <VBox spacing="8">
                                <padding>
                                    <Insets bottom="10" left="10" right="10" top="10" />
                                </padding>

                                   <HBox spacing="8">
                                    <Label prefWidth="100" text="Pickup (s):" />
                                    <TextField fx:id="coffeeTime" prefWidth="80" promptText="10" />
                                </HBox>

                                   <CheckBox fx:id="coffeeOptional" selected="true" text="Enable Coffee Station" />
                            </VBox>
                        </content>
                    </TitledPane>

                       <!-- Advanced -->
                    <TitledPane styleClass="panel-card" text="Advanced">
                        <content>
                            <VBox spacing="8">
                                <padding>
                                    <Insets bottom="10" left="10" right="10" top="10" />
                                </padding>

                                   <Label text="Queue Capacity" />
                                <ChoiceBox fx:id="queueCapacity" prefWidth="150">
                                    <items>
                                        <FXCollections fx:factory="observableArrayList">
                                            <String fx:value="Unlimited" />
                                            <String fx:value="50" />
                                            <String fx:value="100" />
                                            <String fx:value="200" />
                                        </FXCollections>
                                    </items>
                                </ChoiceBox>

                                   <HBox alignment="CENTER_LEFT" spacing="8">
                                    <Label text="Service Variability" />
                                    <ToggleButton fx:id="variabilityToggle" text="On/Off" />
                                </HBox>
                            </VBox>
                        </content>
                    </TitledPane>

                       <!-- Bottom Buttons -->
                    <HBox alignment="CENTER" spacing="8">
                        <Button fx:id="runBtn2" prefWidth="120" styleClass="primary-button" text="Run" />
                        <Button fx:id="resetBtn" prefWidth="120" styleClass="secondary-button" text="Reset" />
                    </HBox>
                </VBox>
            </content>
        </ScrollPane>
    </left>

    <!-- CENTER: Simulation Canvas -->
    <center>
        <VBox spacing="10">
            <padding>
                <Insets bottom="12" left="12" right="12" top="12" />
            </padding>

            <Label styleClass="canvas-title" text="Simulation Canvas" />

            <Pane fx:id="simulationCanvas" prefHeight="520" prefWidth="600" styleClass="canvas">
                <HBox layoutX="36.0" layoutY="94.0" prefHeight="57.0" prefWidth="128.0">
                    <ProgressBar fx:id="veganQueueProgress" minHeight="-Infinity" minWidth="-Infinity" prefHeight="18.0" prefWidth="54.0" progress="0.0" rotate="-90.0">
                        <HBox.margin>
                            <Insets left="-15.0" right="-22.0" top="19.0" />
                        </HBox.margin>
                    </ProgressBar>
                    <ImageView fitHeight="56.0" fitWidth="65.0" pickOnBounds="true" preserveRatio="true">
                        <Image url="@buffet.png" />
                    </ImageView>
                    <VBox alignment="CENTER_LEFT" prefHeight="57.0" prefWidth="60.0">
                        <Label text="Vegan ">
                            <font>
                                <Font size="15.0" />
                            </font>
                        </Label>
                        <Label fx:id="veganQueueLabel" text="Queue: 0 " />
                    </VBox>
                </HBox>
                <Arc fill="DODGERBLUE" layoutX="260.0" layoutY="24.0" length="180.0" radiusX="28.0" radiusY="25.0" rotate="179.9" stroke="BLACK" strokeType="INSIDE" type="ROUND" />
                <Arc fill="RED" layoutX="50.0" layoutY="496.0" length="180.0" radiusX="28.0" radiusY="25.0" rotate="0.0" stroke="BLACK" strokeType="INSIDE" type="ROUND" />
                <HBox layoutX="204.0" layoutY="94.0" prefHeight="57.0" prefWidth="128.0">
                    <ProgressBar fx:id="normalQueueProgress" minHeight="-Infinity" minWidth="-Infinity" prefHeight="18.0" prefWidth="54.0" progress="0.0" rotate="-90.0">
                        <HBox.margin>
                            <Insets left="-15.0" right="-22.0" top="19.0" />
                        </HBox.margin>
                    </ProgressBar>
                    <ImageView fitHeight="56.0" fitWidth="65.0" pickOnBounds="true" preserveRatio="true">
                        <Image url="@buffet.png" />
                    </ImageView>
                    <VBox alignment="CENTER_LEFT" prefHeight="57.0" prefWidth="60.0">
                        <Label text="Normal">
                            <font>
                                <Font size="15.0" />
                            </font>
                        </Label>
                        <Label fx:id="normalQueueLabel" text="Queue: 0 " />
                    </VBox>
                </HBox>
                <HBox layoutX="378.0" layoutY="94.0" prefHeight="57.0" prefWidth="128.0">
                    <ProgressBar fx:id="grillQueueProgress" minHeight="-Infinity" minWidth="-Infinity" prefHeight="18.0" prefWidth="54.0" progress="0.0" rotate="-90.0">
                        <HBox.margin>
                            <Insets left="-15.0" right="-22.0" top="19.0" />
                        </HBox.margin>
                    </ProgressBar>
                    <ImageView fitHeight="56.0" fitWidth="65.0" pickOnBounds="true" preserveRatio="true">
                        <Image url="@buffet.png" />
                    </ImageView>
                    <VBox alignment="CENTER_LEFT" prefHeight="57.0" prefWidth="60.0">
                        <Label text="Grill">
                            <font>
                                <Font size="15.0" />
                            </font>
                        </Label>
                        <Label fx:id="grillQueueLabel" text="Queue: 0 " />
                    </VBox>
                </HBox>
                <HBox layoutX="36.0" layoutY="232.0" prefHeight="57.0" prefWidth="161.0">
                    <ProgressBar fx:id="selfServiceQueueProgress" minHeight="-Infinity" minWidth="-Infinity" prefHeight="18.0" prefWidth="54.0" progress="0.0" rotate="-90.0">
                        <HBox.margin>
                            <Insets left="-15.0" right="-22.0" top="19.0" />
                        </HBox.margin>
                    </ProgressBar>
                    <ImageView fitHeight="56.0" fitWidth="65.0" pickOnBounds="true" preserveRatio="true">
                        <image>
                            <Image url="@cash-machine.png" />
                        </image>
                        <HBox.margin>
                            <Insets left="6.0" />
                        </HBox.margin>
                    </ImageView>
                    <VBox alignment="CENTER_LEFT" prefHeight="57.0" prefWidth="82.0">
                        <Label text="Self-service">
                            <font>
                                <Font size="15.0" />
                            </font>
                        </Label>
                        <Label fx:id="selfServiceQueueLabel" text="Queue: 0 " />
                    </VBox>
                </HBox>
                <HBox layoutX="216.0" layoutY="238.0" prefHeight="57.0" prefWidth="144.0">
                    <ProgressBar fx:id="cashierQueueProgress" minHeight="-Infinity" minWidth="-Infinity" prefHeight="18.0" prefWidth="54.0" progress="0.0" rotate="-90.0">
                        <HBox.margin>
                            <Insets left="-15.0" right="-22.0" top="19.0" />
                        </HBox.margin>
                    </ProgressBar>
                    <ImageView fitHeight="56.0" fitWidth="65.0" pickOnBounds="true" preserveRatio="true">
                        <HBox.margin>
                            <Insets left="6.0" />
                        </HBox.margin>
                        <Image url="@cashier.png" />
                    </ImageView>
                    <VBox alignment="CENTER_LEFT" prefHeight="57.0" prefWidth="60.0">
                        <Label text="Cashier">
                            <font>
                                <Font size="15.0" />
                            </font>
                        </Label>
                        <Label fx:id="cashierQueueLabel1" text="Queue: 0 " />
                    </VBox>
                </HBox>
                <HBox layoutX="378.0" layoutY="238.0" prefHeight="57.0" prefWidth="140.0">
                    <ProgressBar fx:id="cashierQueueProgress2" minHeight="-Infinity" minWidth="-Infinity" prefHeight="18.0" prefWidth="54.0" progress="0.0" rotate="-90.0">
                        <HBox.margin>
                            <Insets left="-15.0" right="-22.0" top="19.0" />
                        </HBox.margin>
                    </ProgressBar>
                    <ImageView fitHeight="56.0" fitWidth="65.0" pickOnBounds="true" preserveRatio="true">
                        <HBox.margin>
                            <Insets left="6.0" />
                        </HBox.margin>
                        <Image url="@cashier.png" />
                    </ImageView>
                    <VBox alignment="CENTER_LEFT" prefHeight="57.0" prefWidth="60.0">
                        <Label text="Cashier">
                            <font>
                                <Font size="15.0" />
                            </font>
                        </Label>
                        <Label fx:id="cashierQueueLabel2" text="Queue: 0 " />
                    </VBox>
                </HBox>
                <HBox layoutX="204.0" layoutY="376.0" prefHeight="57.0" prefWidth="142.0">
                    <ProgressBar fx:id="coffeeQueueProgress" minHeight="-Infinity" minWidth="-Infinity" prefHeight="18.0" prefWidth="54.0" progress="0.0" rotate="-90.0">
                        <HBox.margin>
                            <Insets left="-15.0" right="-22.0" top="19.0" />
                        </HBox.margin>
                    </ProgressBar>
                    <ImageView fitHeight="56.0" fitWidth="65.0" pickOnBounds="true" preserveRatio="true">
                        <HBox.margin>
                            <Insets left="6.0" />
                        </HBox.margin>
                        <Image url="@coffee-machine.png" />
                    </ImageView>
                    <VBox alignment="CENTER_LEFT" prefHeight="57.0" prefWidth="60.0">
                        <Label text="Coffee">
                            <font>
                                <Font size="15.0" />
                            </font>
                        </Label>
                        <Label fx:id="coffeeQueueLabel" text="Queue: 0 " />
                    </VBox>
                </HBox>
            </Pane>

            <HBox alignment="CENTER" spacing="12" />
        </VBox>
    </center>

    <!-- RIGHT: Metrics -->
    <right>
        <VBox prefWidth="320" spacing="12" styleClass="right-panel">
            <padding>
                <Insets bottom="14" left="14" right="14" top="14" />
            </padding>

            <Label styleClass="section-title" text="Analytics" />

            <HBox spacing="10">
                <VBox prefWidth="140" spacing="8" styleClass="metric-card">
                    <Label styleClass="metric-title" text="Throughput" />
                    <Label fx:id="throughputLabel" styleClass="metric-value" text="0 students/hr" />
                </VBox>

                <VBox prefWidth="140" spacing="8" styleClass="metric-card">
                    <Label styleClass="metric-title" text="Avg Wait" />
                    <Label fx:id="avgWaitLabel" styleClass="metric-value" text="0 s" />
                </VBox>
            </HBox>

            <HBox spacing="10">
                <VBox prefWidth="140" spacing="8" styleClass="metric-card">
                    <Label styleClass="metric-title" text="Peak Queue" />
                    <Label fx:id="peakQueueLabel" styleClass="metric-value" text="0" />
                </VBox>

                <VBox prefWidth="140" spacing="8" styleClass="metric-card">
                    <Label styleClass="metric-title" text="Sim Time" />
                    <Label fx:id="simTimeLabel" styleClass="metric-value" text="00:00" />
                </VBox>
            </HBox>

            <Label styleClass="small-heading" text="Queue Length Over Time" />
            <LineChart fx:id="queueChart" prefHeight="160" prefWidth="280">
                <xAxis>
                    <NumberAxis />
                </xAxis>
                <yAxis>
                    <NumberAxis />
                </yAxis>
            </LineChart>

            <Label styleClass="small-heading" text="Utilization by Station" />
            <BarChart fx:id="utilChart" prefHeight="160" prefWidth="280">
                <xAxis>
                    <CategoryAxis />
                </xAxis>
                <yAxis>
                    <NumberAxis />
                </yAxis>
            </BarChart>

            <Pane VBox.vgrow="ALWAYS" />

            <HBox alignment="CENTER" spacing="8" />
        </VBox>
    </right>

</BorderPane>
